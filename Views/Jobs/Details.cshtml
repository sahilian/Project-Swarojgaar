@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Swarojgaar.Data
@model Swarojgaar.ViewModel.JobVM.DetailsJobVM
@inject ApplicationDbContext _dbContext
@inject Microsoft.AspNetCore.Identity.UserManager<User> UserManager

@{
    ViewData["Title"] = "GetDetails";
}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<h1>Job Details</h1>
@{
    var currentJob = await _dbContext.Jobs.FindAsync(Model.JobId);
    var currentCompany = await UserManager.FindByIdAsync(currentJob.UserId);
}
<div>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Organization
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => currentCompany.FirstName)
            @Html.DisplayFor(model => currentCompany.LastName)
        </dd>
        <dt class="col-sm-2">
            Location
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => currentCompany.Location)
        </dd>
        <dt class="col-sm-2">
            Contact Number
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => currentCompany.PhoneNumber)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Title)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Title)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Description)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Description)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.Salary)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Salary)
        </dd>
        <dt class="col-sm-2">
            @Html.DisplayNameFor(model => model.ExpiryDate)
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.FormattedExpiryDate)
        </dd>
    </dl>
</div>
<div>
    <a asp-controller="Jobs" asp-action="Edit" asp-route-id="@Model?.EncryptedJobId" class="btn btn-primary"><i class="bi bi-pencil-square"></i> Edit</a>
    <a asp-controller="Jobs" asp-action="Index" class="btn btn-warning"><i class="bi bi-box-arrow-left"></i> Back to List</a>
</div>
